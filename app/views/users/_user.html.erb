<article class="media">
  <figure class="media-left">
    <p class="image is-128x128">
      <%= image_tag user.get_profile_picture %>
    </p>
  </figure>
  <div class="media-content">
    <div class="content">
      <p><%= user.email %></p>
      <% if current_user.following_accepted.include? user %>
        <%= button_to "Unfollow", follow_path(2), method: :delete, class: "button", params:
      {followed_id: user} %>
      <% elsif current_user.following_requested.include? user %>
        <%= button_to "Remove request", follow_path(2), method: :delete, class: "button", params:
      {follower_id: current_user, followed_id: user} %>
      <% else %>
        <%= button_to "Follow", follows_path, class: "button", params: {followed_id: user} %>
      <% end %>
      <% if user.following_requested.include? current_user%>
        <%= button_to "Accept follow request", follow_path(2), method: :patch, class: "button", params: {follower_id: user, followed_id: current_user} %>
        <%= button_to "Reject follow request", follow_path(2), method: :delete, class: "button", params: {follower_id: user, followed_id: current_user} %>
      <% elsif user.following_accepted.include? current_user %>
        <%= button_to "Remove follower", follow_path(2), method: :delete, class: "button", params: {follower_id: user, followed_id: current_user} %>
      <% end %>
    </div>
  </div>
</article>
